#!/bin/sh

set -e

TITLE=""

# Check if standard input is NOT a terminal (i.e., it's a pipe).
if ! [ -t 0 ]; then
    # If it's a pipe, then it's safe to read from stdin.
    TITLE=$(cat)
fi

ID=$(uuidgen | tr -d '-' | head -c 8 | tr 'a-z' 'A-Z')
UPPER_TITLE=$(echo "$TITLE" | tr 'a-z' 'A-Z')

if [ -n "$TITLE" ]; then
    BANNER_LINE="+ SEC/$ID $UPPER_TITLE +"
else
    BANNER_LINE="+ SEC/$ID +"
fi

SEPARATOR_LINE=$(printf '%s' "$BANNER_LINE" | tr '[:print:]' '-')

printf '\n%s\n%s\n%s\n' "$SEPARATOR_LINE" "$BANNER_LINE" "$SEPARATOR_LINE"
