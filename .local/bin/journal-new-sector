#!/bin/sh

set -e

TITLE=""
# Check if standard input is NOT a terminal (i.e., it's a pipe).
if ! [ -t 0 ]; then
    TITLE=$(cat)
fi

ID=$(uuidgen | tr -d '-' | head -c 8 | tr '[:lower:]' '[:upper:]')
UPPER_TITLE=$(echo "$TITLE" | tr '[:lower:]' '[:upper:]')

if [ -n "$TITLE" ]; then
    BANNER_LINE="+ SEC/$ID $UPPER_TITLE +"
else
    BANNER_LINE="+ SEC/$ID +"
fi

SEPARATOR_LINE=$(printf '%s' "$BANNER_LINE" | tr '[:print:]' '-')

printf '\n%s\n%s\n%s\n' "$SEPARATOR_LINE" "$BANNER_LINE" "$SEPARATOR_LINE"
